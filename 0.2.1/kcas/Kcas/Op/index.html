<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Op (kcas.Kcas.Op)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">kcas</a> &#x00BB; <a href="../index.html">Kcas</a> &#x00BB; Op</nav><header class="odoc-preamble"><h1>Module <code><span>Kcas.Op</span></code></h1><p>Operations on shared memory locations.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Type of operations on shared memory locations.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_cas"><a href="#val-make_cas" class="anchor"></a><code><span><span class="keyword">val</span> make_cas : <span><span><span class="type-var">'a</span> <a href="../Loc/index.html#type-t">Loc.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make_cas r before after</code> is an operation that attempts to set the shared memory location <code>r</code> to the <code>after</code> value and succeeds if the current content of <code>r</code> is the <code>before</code> value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_cmp"><a href="#val-make_cmp" class="anchor"></a><code><span><span class="keyword">val</span> make_cmp : <span><span><span class="type-var">'a</span> <a href="../Loc/index.html#type-t">Loc.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>make_cmp r expected</code> is an operation that succeeds if the current value of the shared memory location <code>r</code> is the <code>expected</code> value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_id"><a href="#val-get_id" class="anchor"></a><code><span><span class="keyword">val</span> get_id : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_id op</code> returns the unique id of the shared memory reference targeted by the <code>op</code>eration.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_on_loc"><a href="#val-is_on_loc" class="anchor"></a><code><span><span class="keyword">val</span> is_on_loc : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Loc/index.html#type-t">Loc.t</a></span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_on_loc op r</code> determines whether the target of <code>op</code> is the shared memory location <code>r</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-atomic"><a href="#val-atomic" class="anchor"></a><code><span><span class="keyword">val</span> atomic : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>atomic op</code> attempts to perform the given operation atomically. Returns <code>true</code> on success and <code>false</code> on failure.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-atomically"><a href="#val-atomically" class="anchor"></a><code><span><span class="keyword">val</span> atomically : <span>?mode:<a href="../Mode/index.html#type-t">Mode.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-t">t</a> list</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>atomically ops</code> attempts to perform the given operations atomically. If used in <a href="../Mode/index.html#val-obstruction_free"><code>Mode.obstruction_free</code></a> may raise <a href="../Mode/index.html#exception-Interference"><code>Mode.Interference</code></a>. Otherwise returns <code>true</code> on success and <code>false</code> on failure. The default for <code>atomically</code> is <a href="../Mode/index.html#val-lock_free"><code>Mode.lock_free</code></a>.</p><p>The algorithm requires provided operations to follow a global total order. To eliminate a class of bugs, the operations are sorted automatically. If the operations are given in either ascending or descending order of the targeted shared memory location ids, then sorting is done in linear time <code>O(n)</code> and does not increase the time complexity of the algorithm. Otherwise sorting may take linearithmic time <code>O(n*log(n))</code>.</p></div></div></div></body></html>