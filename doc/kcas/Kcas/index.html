<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Kcas (kcas.Kcas)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">kcas</a> &#x00BB; Kcas</nav><header class="odoc-preamble"><h1>Module <code><span>Kcas</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#auxiliary-modules">Auxiliary modules</a></li><li><a href="#individual-locations">Individual locations</a></li><li><a href="#manipulating-multiple-locations-atomically">Manipulating multiple locations atomically</a><ul><li><a href="#composable-transactions-on-multiple-locations">Composable transactions on multiple locations</a></li><li><a href="#multi-word-compare-and-set-operations">Multi-word compare-and-set operations</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="auxiliary-modules"><a href="#auxiliary-modules" class="anchor"></a>Auxiliary modules</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Backoff"><a href="#module-Backoff" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Backoff/index.html">Backoff</a></span><span> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Backoff/index.html">Backoff</a></span></code></div><div class="spec-doc"><p>Randomized exponential backoff mechanism.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Timeout"><a href="#module-Timeout" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Timeout/index.html">Timeout</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Timeout support.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Retry"><a href="#module-Retry" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Retry/index.html">Retry</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Retry support.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Mode"><a href="#module-Mode" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Mode/index.html">Mode</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Operating modes of the <code>k-CAS-n-CMP</code> algorithm.</p></div></div><h2 id="individual-locations"><a href="#individual-locations" class="anchor"></a>Individual locations</h2><p>Individual shared memory locations can be manipulated through the <a href="Loc/index.html"><code>Loc</code></a> module that is essentially compatible with the <code>Stdlib.Atomic</code> module except that some of the operations take additional optional arguments:</p><ul><li><code>backoff</code> specifies the configuration for the <a href="Backoff/index.html"><code>Backoff</code></a> mechanism. In special cases, having more detailed knowledge of the application, one might adjust the configuration to improve performance.</li></ul><ul><li><code>timeoutf</code> specifies a timeout in seconds and, if specified, the <a href="Timeout/index.html#exception-Timeout"><code>Timeout.Timeout</code></a> may be raised by the operation to signal that the timeout expired.</li></ul><div class="odoc-spec"><div class="spec module anchored" id="module-Loc"><a href="#module-Loc" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Loc/index.html">Loc</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Shared memory locations.</p></div></div><h2 id="manipulating-multiple-locations-atomically"><a href="#manipulating-multiple-locations-atomically" class="anchor"></a>Manipulating multiple locations atomically</h2><p>Multiple shared memory locations can be manipulated atomically using either</p><ul><li><a href="Xt/index.html"><code>Xt</code></a>, to explicitly pass a transaction log to record accesses, or</li><li><a href="Op/index.html"><code>Op</code></a>, to specify a list of primitive operations to perform.</li></ul><p>Atomic operations over multiple shared memory locations are performed in two or three phases:</p><p>1. The first phase essentially records a list or log of operations to access shared memory locations.</p><p>2. The second phase attempts to perform the operations atomically.</p><p>3. In <a href="Mode/index.html#val-obstruction_free"><code>Mode.obstruction_free</code></a> a third phase verifies all read-only operations.</p><p>Each phase may fail. In particular, in the first phase, as no changes to shared memory have yet been attempted, it is safe, for example, to raise exceptions to signal failure. Failure on the third phase raises <a href="Mode/index.html#exception-Interference"><code>Mode.Interference</code></a>, which is typically automatically handled by <a href="Xt/index.html#val-commit"><code>Xt.commit</code></a>.</p><h3 id="composable-transactions-on-multiple-locations"><a href="#composable-transactions-on-multiple-locations" class="anchor"></a>Composable transactions on multiple locations</h3><p>The <a href="Xt/index.html"><code>Xt</code></a> module provides a way to implement composable transactions over shared memory locations. A transaction can be thought of as a specification of a sequence of <a href="Xt/index.html#val-get"><code>Xt.get</code></a> and <a href="Xt/index.html#val-set"><code>Xt.set</code></a> accesses to shared memory locations. To actually perform the accesses one then <a href="Xt/index.html#val-commit"><code>Xt.commit</code></a>s the transaction.</p><p><b>WARNING</b>: Operations provided by the <a href="Loc/index.html"><code>Loc</code></a> module for accessing individual shared memory locations are not transactional. There are cases where it can be advantageous to perform operations along with a transaction that do not get recorded into the transaction log, but doing so requires one to reason about the potential parallel interleavings of operations.</p><p>Transactions should also generally not perform arbitrary side-effects, because when a transaction is committed it may be attempted multiple times meaning that the side-effects are also performed multiple times.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Xt"><a href="#module-Xt" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Xt/index.html">Xt</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Explicit transaction log passing on shared memory locations.</p></div></div><h3 id="multi-word-compare-and-set-operations"><a href="#multi-word-compare-and-set-operations" class="anchor"></a>Multi-word compare-and-set operations</h3><p>The <a href="Op/index.html"><code>Op</code></a> module provides a multi-word compare-and-set (MCAS) interface for manipulating multiple locations atomically. This is a low-level interface not intended for most users.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Op"><a href="#module-Op" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Op/index.html">Op</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Multi-word compare-and-set operations on shared memory locations.</p></div></div></div></body></html>